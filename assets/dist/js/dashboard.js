!function(){"use strict";var t={d:function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{format:function(){return c},isLastDayOfMonth:function(){return i},parseISO8601:function(){return a},toISO8601:function(){return s}});const{nonce:n,root:o}=window.koko_analytics;function r(t,e={}){let r=o+"koko-analytics/v1"+t+"?"+new URLSearchParams(e);return fetch(r,{headers:{"X-WP-Nonce":n,Accepts:"application/json"},credentials:"same-origin"}).then((t=>{if(t.status>=400)throw console.error("Koko Analytics encountered an error trying to request data from the REST endpoints. Please check your PHP error logs for the error that occurred."),new Error(t.statusText);return t})).then((t=>t.json()))}function i(t){let e=new Date(t);return e.setDate(e.getDate()+1),t.getMonth()!==e.getMonth()}function a(t){if(null===t)return null;const e=t.split("-");if(2===e.length&&e.push("1"),3!==e.length)return null;let[n,o,r]=e.map((t=>parseInt(t,10)));return n<1e3&&(n+=2e3),n<2e3||n>3e3||o<1||o>12||r<1||r>31?null:new Date(n,o-1,r)}function l(t){return t<10?"0"+t:t}function s(t){return`${t.getFullYear()}-${l(t.getMonth()+1)}-${l(t.getDate())}`}function c(t,e){t="string"==typeof t?a(t):t,e=e||{day:"numeric",month:"short",year:"numeric"};try{return new Intl.DateTimeFormat(void 0,e).format(t)}catch(t){}return t.toLocaleDateString()}function d(t,e,n,o,r){return{sel:t,data:e,children:n,text:o,elm:r,key:void 0===e?void 0:e.key}}window.setTimeout((()=>{window.location.reload()}),432e5);const u=Array.isArray;function f(t){return"string"==typeof t||"number"==typeof t||t instanceof String||t instanceof Number}function h(t){if(v(t)){for(;t&&v(t);)t=p(t).parent;return null!=t?t:null}return t.parentNode}function v(t){return 11===t.nodeType}function p(t,e){var n,o,r;const i=t;return null!==(n=i.parent)&&void 0!==n||(i.parent=null!=e?e:null),null!==(o=i.firstChildNode)&&void 0!==o||(i.firstChildNode=t.firstChild),null!==(r=i.lastChildNode)&&void 0!==r||(i.lastChildNode=t.lastChild),i}const m={createElement:function(t,e){return document.createElement(t,e)},createElementNS:function(t,e,n){return document.createElementNS(t,e,n)},createTextNode:function(t){return document.createTextNode(t)},createDocumentFragment:function(){return p(document.createDocumentFragment())},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){if(v(t)){let e=t;for(;e&&v(e);)e=p(e).parent;t=null!=e?e:t}v(e)&&(e=p(e,t)),n&&v(n)&&(n=p(n).firstChildNode),t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){v(e)&&(e=p(e,t)),t.appendChild(e)},parentNode:h,nextSibling:function(t){var e;if(v(t)){const n=p(t),o=h(n);if(o&&n.lastChildNode){const t=Array.from(o.childNodes),r=t.indexOf(n.lastChildNode);return null!==(e=t[r+1])&&void 0!==e?e:null}return null}return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},getTextContent:function(t){return t.textContent},isElement:function(t){return 1===t.nodeType},isText:function(t){return 3===t.nodeType},isComment:function(t){return 8===t.nodeType},isDocumentFragment:v};function g(t){return void 0===t}function y(t){return void 0!==t}const k=d("",{},[],void 0,void 0);function x(t,e){var n,o;const r=t.key===e.key,i=(null===(n=t.data)||void 0===n?void 0:n.is)===(null===(o=e.data)||void 0===o?void 0:o.is),a=t.sel===e.sel,l=!(!t.sel&&t.sel===e.sel)||typeof t.text==typeof e.text;return a&&r&&i&&l}function w(){throw new Error("The document fragment is not supported on this platform.")}function C(t,e,n){var o;const r={};for(let i=e;i<=n;++i){const e=null===(o=t[i])||void 0===o?void 0:o.key;void 0!==e&&(r[e]=i)}return r}const S=["create","update","remove","destroy","pre","post"];function b(t,e,n){const o={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},r=void 0!==e?e:m;for(const e of S)for(const n of t){const t=n[e];void 0!==t&&o[e].push(t)}function i(t,e){return function(){if(0==--e){const e=r.parentNode(t);r.removeChild(e,t)}}}function a(t,e){var i,l,s,c;let d,h=t.data;if(void 0!==h){const e=null===(i=h.hook)||void 0===i?void 0:i.init;y(e)&&(e(t),h=t.data)}const v=t.children,p=t.sel;if("!"===p)g(t.text)&&(t.text=""),t.elm=r.createComment(t.text);else if(void 0!==p){const n=p.indexOf("#"),i=p.indexOf(".",n),s=n>0?n:p.length,c=i>0?i:p.length,m=-1!==n||-1!==i?p.slice(0,Math.min(s,c)):p,g=t.elm=y(h)&&y(d=h.ns)?r.createElementNS(d,m,h):r.createElement(m,h);for(s<c&&g.setAttribute("id",p.slice(s+1,c)),i>0&&g.setAttribute("class",p.slice(c+1).replace(/\./g," ")),d=0;d<o.create.length;++d)o.create[d](k,t);if(u(v))for(d=0;d<v.length;++d){const t=v[d];null!=t&&r.appendChild(g,a(t,e))}else f(t.text)&&r.appendChild(g,r.createTextNode(t.text));const x=t.data.hook;y(x)&&(null===(l=x.create)||void 0===l||l.call(x,k,t),x.insert&&e.push(t))}else if((null===(s=null==n?void 0:n.experimental)||void 0===s?void 0:s.fragments)&&t.children){for(t.elm=(null!==(c=r.createDocumentFragment)&&void 0!==c?c:w)(),d=0;d<o.create.length;++d)o.create[d](k,t);for(d=0;d<t.children.length;++d){const n=t.children[d];null!=n&&r.appendChild(t.elm,a(n,e))}}else t.elm=r.createTextNode(t.text);return t.elm}function l(t,e,n,o,i,l){for(;o<=i;++o){const i=n[o];null!=i&&r.insertBefore(t,a(i,l),e)}}function s(t){var e,n;const r=t.data;if(void 0!==r){null===(n=null===(e=null==r?void 0:r.hook)||void 0===e?void 0:e.destroy)||void 0===n||n.call(e,t);for(let e=0;e<o.destroy.length;++e)o.destroy[e](t);if(void 0!==t.children)for(let e=0;e<t.children.length;++e){const n=t.children[e];null!=n&&"string"!=typeof n&&s(n)}}}function c(t,e,n,a){for(var l,d;n<=a;++n){let a,u;const f=e[n];if(null!=f)if(y(f.sel)){s(f),a=o.remove.length+1,u=i(f.elm,a);for(let t=0;t<o.remove.length;++t)o.remove[t](f,u);const t=null===(d=null===(l=null==f?void 0:f.data)||void 0===l?void 0:l.hook)||void 0===d?void 0:d.remove;y(t)?t(f,u):u()}else f.children?(s(f),c(t,f.children,0,f.children.length-1)):r.removeChild(t,f.elm)}}function h(t,e,n){var i,s,d,u,f,v,p,m;const k=null===(i=e.data)||void 0===i?void 0:i.hook;null===(s=null==k?void 0:k.prepatch)||void 0===s||s.call(k,t,e);const w=e.elm=t.elm;if(t===e)return;if(void 0!==e.data||y(e.text)&&e.text!==t.text){null!==(d=e.data)&&void 0!==d||(e.data={}),null!==(u=t.data)&&void 0!==u||(t.data={});for(let n=0;n<o.update.length;++n)o.update[n](t,e);null===(p=null===(v=null===(f=e.data)||void 0===f?void 0:f.hook)||void 0===v?void 0:v.update)||void 0===p||p.call(v,t,e)}const S=t.children,b=e.children;g(e.text)?y(S)&&y(b)?S!==b&&function(t,e,n,o){let i,s,d,u,f=0,v=0,p=e.length-1,m=e[0],y=e[p],k=n.length-1,w=n[0],S=n[k];for(;f<=p&&v<=k;)null==m?m=e[++f]:null==y?y=e[--p]:null==w?w=n[++v]:null==S?S=n[--k]:x(m,w)?(h(m,w,o),m=e[++f],w=n[++v]):x(y,S)?(h(y,S,o),y=e[--p],S=n[--k]):x(m,S)?(h(m,S,o),r.insertBefore(t,m.elm,r.nextSibling(y.elm)),m=e[++f],S=n[--k]):x(y,w)?(h(y,w,o),r.insertBefore(t,y.elm,m.elm),y=e[--p],w=n[++v]):(void 0===i&&(i=C(e,f,p)),s=i[w.key],g(s)?r.insertBefore(t,a(w,o),m.elm):(d=e[s],d.sel!==w.sel?r.insertBefore(t,a(w,o),m.elm):(h(d,w,o),e[s]=void 0,r.insertBefore(t,d.elm,m.elm))),w=n[++v]);v<=k&&(u=null==n[k+1]?null:n[k+1].elm,l(t,u,n,v,k,o)),f<=p&&c(t,e,f,p)}(w,S,b,n):y(b)?(y(t.text)&&r.setTextContent(w,""),l(w,null,b,0,b.length-1,n)):y(S)?c(w,S,0,S.length-1):y(t.text)&&r.setTextContent(w,""):t.text!==e.text&&(y(S)&&c(w,S,0,S.length-1),r.setTextContent(w,e.text)),null===(m=null==k?void 0:k.postpatch)||void 0===m||m.call(k,t,e)}return function(t,e){let n,i,l;const s=[];for(n=0;n<o.pre.length;++n)o.pre[n]();for(function(t,e){return t.isElement(e)}(r,t)?t=function(t){const e=t.id?"#"+t.id:"",n=t.getAttribute("class"),o=n?"."+n.split(" ").join("."):"";return d(r.tagName(t).toLowerCase()+e+o,{},[],void 0,t)}(t):function(t,e){return t.isDocumentFragment(e)}(r,t)&&(t=d(void 0,{},[],void 0,t)),x(t,e)?h(t,e,s):(i=t.elm,l=r.parentNode(i),a(e,s),null!==l&&(r.insertBefore(l,e.elm,r.nextSibling(i)),c(l,[t],0,0))),n=0;n<s.length;++n)s[n].data.hook.insert(s[n]);for(n=0;n<o.post.length;++n)o.post[n]();return e}}function E(t,e){let n;const o=e.elm;let r=t.data.attrs,i=e.data.attrs;if((r||i)&&r!==i){for(n in r=r||{},i=i||{},i){const t=i[n];r[n]!==t&&(!0===t?o.setAttribute(n,""):!1===t?o.removeAttribute(n):120!==n.charCodeAt(0)?o.setAttribute(n,t):58===n.charCodeAt(3)?o.setAttributeNS("http://www.w3.org/XML/1998/namespace",n,t):58===n.charCodeAt(5)?o.setAttributeNS("http://www.w3.org/1999/xlink",n,t):o.setAttribute(n,t))}for(n in r)n in i||o.removeAttribute(n)}}const M={create:E,update:E};function D(t,e,n){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==e)for(let t=0;t<e.length;++t){const n=e[t];if("string"==typeof n)continue;const o=n.data;void 0!==o&&D(o,n.children,n.sel)}}function L(t,e,n){let o,r,i,a={};if(void 0!==n?(null!==e&&(a=e),u(n)?o=n:f(n)?r=n.toString():n&&n.sel&&(o=[n])):null!=e&&(u(e)?o=e:f(e)?r=e.toString():e&&e.sel?o=[e]:a=e),void 0!==o)for(i=0;i<o.length;++i)f(o[i])&&(o[i]=d(void 0,void 0,void 0,o[i],void 0));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||D(a,o,t),d(t,a,o,r,void 0)}const N=window.koko_analytics.items_per_page,_=b([M]);function A(t,e,n,o,i,a,l){let c=t.nextElementSibling,d=c.nextElementSibling,u=d.children[0],f=d.children[1],h=0,v=e.length;function p(){r(i,{offset:h,limit:N,start_date:s(n),end_date:s(o)}).then((e=>{v=e.length,t=_(t,m(e)),l&&l(e)}))}function m(t){return f.classList.toggle("disabled",v<N),u.classList.toggle("disabled",0===h),c.style.display=t.length?"none":"",d.style.display=t.length<N&&0===h?"none":"",L("div.ka-topx--body",t.map(((t,e)=>a(t,h+e+1))))}return t=_(t,m(e)),l&&l(e),u.addEventListener("click",(()=>{0!==h&&(h=Math.max(0,h-N),p())})),f.addEventListener("click",(()=>{v<N||(h+=N,p())})),{update:function(t,e){n=t,o=e,h=0,p()}}}Object.assign(window.koko_analytics,{components:{BlockComponent:A},util:{request:r,dates:e}});const T=1e6,q=/\.0+$/;function O(t){let e=0;return t>=T?(t/=T,e=Math.max(0,3-String(Math.round(t)).length),t.toFixed(e).replace(q,"")+"M"):t>=1e4?(t/=1e3,e=Math.max(0,3-String(Math.round(t)).length),t.toFixed(e).replace(q,"")+"K"):String(t)}function $(t,e,n){if("function"==typeof t)t.call(e,n,e);else if("object"==typeof t)for(let o=0;o<t.length;o++)$(t[o],e,n)}function B(t,e){const n=t.type,o=e.data.on;o&&o[n]&&$(o[n],e,t)}function F(t,e){const n=t.data.on,o=t.listener,r=t.elm,i=e&&e.data.on,a=e&&e.elm;let l;if(n!==i){if(n&&o)if(i)for(l in n)i[l]||r.removeEventListener(l,o,!1);else for(l in n)r.removeEventListener(l,o,!1);if(i){const o=e.listener=t.listener||function t(e){B(e,t.vnode)};if(o.vnode=e,n)for(l in i)n[l]||a.addEventListener(l,o,!1);else for(l in i)a.addEventListener(l,o,!1)}}}const P={create:F,update:F,destroy:F},{i18n:j}=window.koko_analytics,I=b([P,M]),R=48,U=function(){const t=document.createElement("div");return t.className="ka-chart--tooltip",t.style.display="none",t.innerHTML=`\n<div class="ka-chart--tooltip-box">\n  <div class="ka-chart--tooltip-heading"></div>\n  <div style="display: flex">\n    <div class="ka-chart--tooltip-content ka--visitors">\n      <div class="ka-chart--tooltip-amount"></div>\n      <div>${j.Visitors}</div>\n    </div>\n    <div class="ka-chart--tooltip-content ka--pageviews">\n      <div class="ka-chart--tooltip-amount"></div>\n      <div>${j.Pageviews}</div>\n    </div>\n  </div>\n</div>\n<div class="ka-chart--tooltip-arrow"></div>`,t}();function H(){U.style.display="none"}let{startDate:Y,endDate:W,data:X}=window.koko_analytics;Y=a(Y),W=a(W);const K=[function(t,e,n,o){return A(t,e,n,o,"/posts",(function(t,e){return L("div.ka-topx--row ka-fade",[L("div.ka-topx--rank",{},e),L("div.ka-topx--col",{},[L("a",{attrs:{href:t.post_permalink}},t.post_title||"(no title)")]),L("div.ka-topx--amount",Math.max(1,t.visitors)),L("div.ka-topx--amount",t.pageviews)])}))}(document.querySelector("#ka-top-posts"),X.posts,Y,W),function(t,e,n,o){return A(t,e,n,o,"/referrers",(function(t,e){return t=function(t){return t.displayUrl=t.url.replace(/^https?:\/\/(www\.)?(.+?)\/?$/,"$2"),0===t.url.indexOf("https://t.co/")?t.url="https://twitter.com/search?q="+encodeURI(t.url):0===t.url.indexOf("android-app://")&&(t.displayUrl=t.url.replace("android-app://","Android app: "),t.url=t.url.replace("android-app://","https://play.google.com/store/apps/details?id=")),t}(t),L("div.ka-topx--row ka-fade",[L("div.ka-topx--rank",{},e),L("div.ka-topx--col",{},[L("a",{attrs:{href:t.url}},t.displayUrl)]),L("div.ka-topx--amount",Math.max(1,t.visitors)),L("div.ka-topx--amount",t.pageviews)])}))}(document.querySelector("#ka-top-referrers"),X.referrers,Y,W)];window.koko_analytics.registerDashboardComponent=function(t){K.push(t)};const V=function(t){function e(t,e,n,o){var r;t.children[1].children[0].textContent=O(e),t.children[1].children[1].textContent=null!==o?(r=o,(r=Math.round(100*r))>=0?`+${r}%`:`${r}%`):"",t.classList.toggle("ka-up",n>0),t.classList.toggle("ka-down",n<0),t.children[2].firstElementChild.textContent=O(Math.abs(n))}return window.setInterval((function(){r("/realtime",{since:"-1 hour"}).then((e=>{t.children[2].children[1].textContent=O(e)}))}),6e4),{update:function(n,o){r("/totals",{start_date:s(n),end_date:s(o)}).then((n=>{e(t.children[0],n.visitors,n.visitors_change,n.visitors_change_rel),e(t.children[1],n.pageviews,n.pageviews_change,n.pageviews_change_rel)}))}}}(document.querySelector("#ka-totals")),z=function(t,e,n){n||(n=Math.max(240,Math.min(window.innerHeight/3,360))),t.parentElement.style.minHeight=`${n+4}px`;let o={month:"short",year:"numeric"};const i=t.clientWidth-R-24,a=n-36-24;function l(t){if(t.length<=1)return L("!");const e=i/t.length,r=.9*e,l=(e-r)/2,s=function(t){const e=function(t){if(t<10)return 10;const e=Math.floor(Math.log10(t)),n=Math.pow(10,e);return Math.ceil(t/n)*n}(t);return{ticks:[0,e/2,e],max:e}}(t.reduce(((t,e)=>t.pageviews>e.pageviews?t:e),0).pageviews),d=t.length<=90,u=a/s.max,f=t=>t*e,h=s.max<=0?()=>a:t=>a-t*u;return L("svg",{attrs:{width:"100%",height:n}},[L("g",[L("g",{attrs:{class:"axes-y",transform:"translate(0, 24)","text-anchor":"end"}},s.ticks.map((t=>{const e=h(t);return L("g",[L("line",{attrs:{stroke:"#eee",x1:R,x2:i+R,y1:e,y2:e}}),L("text",{attrs:{y:e,fill:"#757575",x:36,dy:"0.33em"}},O(t))])}))),L("g",{attrs:{class:"axes-x","text-anchor":"middle",transform:`translate(48, ${24+a})`}},t.map(((n,r)=>{let i=0===r||r===t.length-1?n.date:null;if(!d&&!i)return null;const a=f(r)+.5*e;return L("g",[L("line",{attrs:{stroke:"#ddd",x1:a,x2:a,y1:0,y2:6}}),i?L("text",{attrs:{fill:"#757575",x:a,y:10,dy:"1em"}},c(n.date,o)):""])})).filter((t=>null!==t)))]),L("g",{attrs:{class:"bars",transform:"translate(48, 24)"}},t.map(((t,e)=>{const n=t.pageviews*u,i=t.visitors*u,a=f(e),s=function(t,e){return n=>{U.querySelector(".ka-chart--tooltip-heading").textContent=c(t.date,o),U.querySelector(".ka--visitors").children[0].textContent=t.visitors,U.querySelector(".ka--pageviews").children[0].textContent=t.pageviews;const r=n.currentTarget.getBoundingClientRect();U.style.display="block",U.style.left=r.left+window.scrollX-.5*U.clientWidth+.5*e+"px",U.style.top=r.y+window.scrollY-U.clientHeight+"px"}}(t,r);return L("g",{on:{click:s,mouseenter:s,mouseleave:H}},[L("rect",{attrs:{class:"ka--pageviews",height:n,width:r,x:a+l,y:h(t.pageviews)}}),L("rect",{attrs:{class:"ka--visitors",height:i,width:r,x:a+l,y:h(t.visitors)}})])})))])}return t=I(t,l(e)),document.body.appendChild(U),document.addEventListener("click",(t=>{t.target.matches(".ka-chart *,.ka-chart--tooltip *")||(U.style.display="none")})),{update:function(e,n){const i=n-e>=314496e5;o=i?{month:"short",year:"numeric"}:void 0,r("/stats",{start_date:s(e),end_date:s(n),monthly:i?1:0}).then((e=>{t=I(t,l(e))}))}}}(document.querySelector("#ka-chart"),X.chart);!function(t,e){const n=t.querySelector("#ka-datepicker-dropdown"),o=t.querySelector("#ka-date-start"),r=t.querySelector("#ka-date-end"),l=t.querySelector(".ka-datepicker--label"),d=t.querySelector(".ka-datepicker--quicknav-heading"),u=t.querySelector("#ka-date-presets"),f=t.querySelector(".ka-datepicker--quicknav-prev"),h=t.querySelector(".ka-datepicker--quicknav-next");let v=a(o.value),p=a(r.value),m=!1;function g(t){m="boolean"==typeof t?t:!m,n.style.display=m?"":"none",l.setAttribute("aria-expanded",m)}function y(t){const n=`${c(v)} — ${c(p)}`;l.textContent=n,d.textContent=n,t&&e({startDate:v,endDate:p})}function k(t){if(1===v.getDate()&&i(p)){const e=(p.getMonth()-v.getMonth()+1)*t;v=new Date(v.getFullYear(),v.getMonth()+e,1,0,0,0),p=new Date(p.getFullYear(),p.getMonth()+e+1,0,23,59,59)}else{const e=Math.round((p-v)/864e5)*t;v.setDate(v.getDate()+e),p.setDate(p.getDate()+e)}u.value="custom",o.value=s(v),r.value=s(p),y(!0)}document.addEventListener("click",(e=>{for(let n=e.target;null!==n;n=n.parentNode)if(n===t)return;g(!1)})),o.addEventListener("change",(t=>{let e=a(t.target.value);e&&(v=e,u.value="custom",y(!0))})),r.addEventListener("change",(t=>{let e=a(t.target.value);e&&(p=e,u.value="custom",y(!0))})),u.addEventListener("change",(t=>{"custom"!==t.target.value&&(v=a(t.target.selectedOptions[0].dataset.startDate),p=a(t.target.selectedOptions[0].dataset.endDate),o.value=s(v),r.value=s(p),y(!0))})),document.addEventListener("keydown",(t=>{"ArrowLeft"!==t.key&&"ArrowRight"!==t.key||k("ArrowLeft"===t.key?-1:1)})),f.addEventListener("click",(()=>k(-1))),h.addEventListener("click",(()=>k(1))),l.addEventListener("click",g),y()}(document.querySelector(".ka-datepicker"),(({startDate:t,endDate:e})=>{[V,z,...K].forEach((n=>n.update(t,e)));let n=new URLSearchParams(window.location.search);n.set("start_date",s(t)),n.set("end_date",s(e)),history.replaceState(void 0,void 0,window.location.pathname+"?"+n)}))}();