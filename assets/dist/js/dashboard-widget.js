!function(){"use strict";const{nonce:t,root:e}=window.koko_analytics;function n(n,o={}){let r=e+"koko-analytics/v1"+n+"?"+new URLSearchParams(o);return fetch(r,{headers:{"X-WP-Nonce":t,Accepts:"application/json"},credentials:"same-origin"}).then((t=>{if(t.status>=400)throw console.error("Koko Analytics encountered an error trying to request data from the REST endpoints. Please check your PHP error logs for the error that occurred."),new Error(t.statusText);return t})).then((t=>t.json()))}window.setTimeout((()=>{window.location.reload()}),432e5);const o=1e6,r=1e3,i=/\.0+$/;function l(t){let e=0;return t>=o?(t/=o,e=Math.max(0,3-String(Math.round(t)).length),t.toFixed(e).replace(i,"")+"M"):t>=10*r?(t/=r,e=Math.max(0,3-String(Math.round(t)).length),t.toFixed(e).replace(i,"")+"K"):String(t)}function a(t){return t<10?"0"+t:t}function s(t){return`${t.getFullYear()}-${a(t.getMonth()+1)}-${a(t.getDate())}`}function c(t,e){t="string"==typeof t?function(t){if(null===t)return null;const e=t.split("-");if(2===e.length&&e.push("1"),3!==e.length)return null;let[n,o,r]=e.map((t=>parseInt(t,10)));return n<1e3&&(n+=2e3),n<2e3||n>3e3||o<1||o>12||r<1||r>31?null:new Date(n,o-1,r)}(t):t,e=e||{day:"numeric",month:"short",year:"numeric"};try{return new Intl.DateTimeFormat(void 0,e).format(t)}catch(t){}return t.toLocaleDateString()}function d(t,e,n,o,r){return{sel:t,data:e,children:n,text:o,elm:r,key:void 0===e?void 0:e.key}}const u=Array.isArray;function f(t){return"string"==typeof t||"number"==typeof t||t instanceof String||t instanceof Number}function h(t){if(v(t)){for(;t&&v(t);)t=m(t).parent;return null!=t?t:null}return t.parentNode}function v(t){return 11===t.nodeType}function m(t,e){var n,o,r;const i=t;return null!==(n=i.parent)&&void 0!==n||(i.parent=null!=e?e:null),null!==(o=i.firstChildNode)&&void 0!==o||(i.firstChildNode=t.firstChild),null!==(r=i.lastChildNode)&&void 0!==r||(i.lastChildNode=t.lastChild),i}const p={createElement:function(t,e){return document.createElement(t,e)},createElementNS:function(t,e,n){return document.createElementNS(t,e,n)},createTextNode:function(t){return document.createTextNode(t)},createDocumentFragment:function(){return m(document.createDocumentFragment())},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){if(v(t)){let e=t;for(;e&&v(e);)e=m(e).parent;t=null!=e?e:t}v(e)&&(e=m(e,t)),n&&v(n)&&(n=m(n).firstChildNode),t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){v(e)&&(e=m(e,t)),t.appendChild(e)},parentNode:h,nextSibling:function(t){var e;if(v(t)){const n=m(t),o=h(n);if(o&&n.lastChildNode){const t=Array.from(o.childNodes),r=t.indexOf(n.lastChildNode);return null!==(e=t[r+1])&&void 0!==e?e:null}return null}return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},getTextContent:function(t){return t.textContent},isElement:function(t){return 1===t.nodeType},isText:function(t){return 3===t.nodeType},isComment:function(t){return 8===t.nodeType},isDocumentFragment:v};function g(t){return void 0===t}function y(t){return void 0!==t}const x=d("",{},[],void 0,void 0);function w(t,e){var n,o;const r=t.key===e.key,i=(null===(n=t.data)||void 0===n?void 0:n.is)===(null===(o=e.data)||void 0===o?void 0:o.is),l=t.sel===e.sel,a=!(!t.sel&&t.sel===e.sel)||typeof t.text==typeof e.text;return l&&r&&i&&a}function k(){throw new Error("The document fragment is not supported on this platform.")}function C(t,e,n){var o;const r={};for(let i=e;i<=n;++i){const e=null===(o=t[i])||void 0===o?void 0:o.key;void 0!==e&&(r[e]=i)}return r}const N=["create","update","remove","destroy","pre","post"];function b(t,e,n){if("function"==typeof t)t.call(e,n,e);else if("object"==typeof t)for(let o=0;o<t.length;o++)b(t[o],e,n)}function S(t,e){const n=t.type,o=e.data.on;o&&o[n]&&b(o[n],e,t)}function T(t,e){const n=t.data.on,o=t.listener,r=t.elm,i=e&&e.data.on,l=e&&e.elm;let a;if(n!==i){if(n&&o)if(i)for(a in n)i[a]||r.removeEventListener(a,o,!1);else for(a in n)r.removeEventListener(a,o,!1);if(i){const o=e.listener=t.listener||function t(e){S(e,t.vnode)};if(o.vnode=e,n)for(a in i)n[a]||l.addEventListener(a,o,!1);else for(a in i)l.addEventListener(a,o,!1)}}}const E={create:T,update:T,destroy:T};function A(t,e){let n;const o=e.elm;let r=t.data.attrs,i=e.data.attrs;if((r||i)&&r!==i){for(n in r=r||{},i=i||{},i){const t=i[n];r[n]!==t&&(!0===t?o.setAttribute(n,""):!1===t?o.removeAttribute(n):120!==n.charCodeAt(0)?o.setAttribute(n,t):58===n.charCodeAt(3)?o.setAttributeNS("http://www.w3.org/XML/1998/namespace",n,t):58===n.charCodeAt(5)?o.setAttributeNS("http://www.w3.org/1999/xlink",n,t):o.setAttribute(n,t))}for(n in r)n in i||o.removeAttribute(n)}}const M={create:A,update:A};function D(t,e,n){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==e)for(let t=0;t<e.length;++t){const n=e[t];if("string"==typeof n)continue;const o=n.data;void 0!==o&&D(o,n.children,n.sel)}}function $(t,e,n){let o,r,i,l={};if(void 0!==n?(null!==e&&(l=e),u(n)?o=n:f(n)?r=n.toString():n&&n.sel&&(o=[n])):null!=e&&(u(e)?o=e:f(e)?r=e.toString():e&&e.sel?o=[e]:l=e),void 0!==o)for(i=0;i<o.length;++i)f(o[i])&&(o[i]=d(void 0,void 0,void 0,o[i],void 0));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||D(l,o,t),d(t,l,o,r,void 0)}const{i18n:B}=window.koko_analytics,F=function(t,e,n){const o={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},r=p;for(const e of N)for(const n of t){const t=n[e];void 0!==t&&o[e].push(t)}function i(t,e){return function(){if(0==--e){const e=r.parentNode(t);r.removeChild(e,t)}}}function l(t,e){var i,a,s,c;let d,h=t.data;if(void 0!==h){const e=null===(i=h.hook)||void 0===i?void 0:i.init;y(e)&&(e(t),h=t.data)}const v=t.children,m=t.sel;if("!"===m)g(t.text)&&(t.text=""),t.elm=r.createComment(t.text);else if(void 0!==m){const n=m.indexOf("#"),i=m.indexOf(".",n),s=n>0?n:m.length,c=i>0?i:m.length,p=-1!==n||-1!==i?m.slice(0,Math.min(s,c)):m,g=t.elm=y(h)&&y(d=h.ns)?r.createElementNS(d,p,h):r.createElement(p,h);for(s<c&&g.setAttribute("id",m.slice(s+1,c)),i>0&&g.setAttribute("class",m.slice(c+1).replace(/\./g," ")),d=0;d<o.create.length;++d)o.create[d](x,t);if(u(v))for(d=0;d<v.length;++d){const t=v[d];null!=t&&r.appendChild(g,l(t,e))}else f(t.text)&&r.appendChild(g,r.createTextNode(t.text));const w=t.data.hook;y(w)&&(null===(a=w.create)||void 0===a||a.call(w,x,t),w.insert&&e.push(t))}else if((null===(s=null==n?void 0:n.experimental)||void 0===s?void 0:s.fragments)&&t.children){for(t.elm=(null!==(c=r.createDocumentFragment)&&void 0!==c?c:k)(),d=0;d<o.create.length;++d)o.create[d](x,t);for(d=0;d<t.children.length;++d){const n=t.children[d];null!=n&&r.appendChild(t.elm,l(n,e))}}else t.elm=r.createTextNode(t.text);return t.elm}function a(t,e,n,o,i,a){for(;o<=i;++o){const i=n[o];null!=i&&r.insertBefore(t,l(i,a),e)}}function s(t){var e,n;const r=t.data;if(void 0!==r){null===(n=null===(e=null==r?void 0:r.hook)||void 0===e?void 0:e.destroy)||void 0===n||n.call(e,t);for(let e=0;e<o.destroy.length;++e)o.destroy[e](t);if(void 0!==t.children)for(let e=0;e<t.children.length;++e){const n=t.children[e];null!=n&&"string"!=typeof n&&s(n)}}}function c(t,e,n,l){for(var a,d;n<=l;++n){let l,u;const f=e[n];if(null!=f)if(y(f.sel)){s(f),l=o.remove.length+1,u=i(f.elm,l);for(let t=0;t<o.remove.length;++t)o.remove[t](f,u);const t=null===(d=null===(a=null==f?void 0:f.data)||void 0===a?void 0:a.hook)||void 0===d?void 0:d.remove;y(t)?t(f,u):u()}else f.children?(s(f),c(t,f.children,0,f.children.length-1)):r.removeChild(t,f.elm)}}function h(t,e,n){var i,s,d,u,f,v,m,p;const x=null===(i=e.data)||void 0===i?void 0:i.hook;null===(s=null==x?void 0:x.prepatch)||void 0===s||s.call(x,t,e);const k=e.elm=t.elm;if(t===e)return;if(void 0!==e.data||y(e.text)&&e.text!==t.text){null!==(d=e.data)&&void 0!==d||(e.data={}),null!==(u=t.data)&&void 0!==u||(t.data={});for(let n=0;n<o.update.length;++n)o.update[n](t,e);null===(m=null===(v=null===(f=e.data)||void 0===f?void 0:f.hook)||void 0===v?void 0:v.update)||void 0===m||m.call(v,t,e)}const N=t.children,b=e.children;g(e.text)?y(N)&&y(b)?N!==b&&function(t,e,n,o){let i,s,d,u,f=0,v=0,m=e.length-1,p=e[0],y=e[m],x=n.length-1,k=n[0],N=n[x];for(;f<=m&&v<=x;)null==p?p=e[++f]:null==y?y=e[--m]:null==k?k=n[++v]:null==N?N=n[--x]:w(p,k)?(h(p,k,o),p=e[++f],k=n[++v]):w(y,N)?(h(y,N,o),y=e[--m],N=n[--x]):w(p,N)?(h(p,N,o),r.insertBefore(t,p.elm,r.nextSibling(y.elm)),p=e[++f],N=n[--x]):w(y,k)?(h(y,k,o),r.insertBefore(t,y.elm,p.elm),y=e[--m],k=n[++v]):(void 0===i&&(i=C(e,f,m)),s=i[k.key],g(s)?r.insertBefore(t,l(k,o),p.elm):(d=e[s],d.sel!==k.sel?r.insertBefore(t,l(k,o),p.elm):(h(d,k,o),e[s]=void 0,r.insertBefore(t,d.elm,p.elm))),k=n[++v]);v<=x&&(u=null==n[x+1]?null:n[x+1].elm,a(t,u,n,v,x,o)),f<=m&&c(t,e,f,m)}(k,N,b,n):y(b)?(y(t.text)&&r.setTextContent(k,""),a(k,null,b,0,b.length-1,n)):y(N)?c(k,N,0,N.length-1):y(t.text)&&r.setTextContent(k,""):t.text!==e.text&&(y(N)&&c(k,N,0,N.length-1),r.setTextContent(k,e.text)),null===(p=null==x?void 0:x.postpatch)||void 0===p||p.call(x,t,e)}return function(t,e){let n,i,a;const s=[];for(n=0;n<o.pre.length;++n)o.pre[n]();for(function(t,e){return t.isElement(e)}(r,t)?t=function(t){const e=t.id?"#"+t.id:"",n=t.getAttribute("class"),o=n?"."+n.split(" ").join("."):"";return d(r.tagName(t).toLowerCase()+e+o,{},[],void 0,t)}(t):function(t,e){return t.isDocumentFragment(e)}(r,t)&&(t=d(void 0,{},[],void 0,t)),w(t,e)?h(t,e,s):(i=t.elm,a=r.parentNode(i),l(e,s),null!==a&&(r.insertBefore(a,e.elm,r.nextSibling(i)),c(a,[t],0,0))),n=0;n<s.length;++n)s[n].data.hook.insert(s[n]);for(n=0;n<o.post.length;++n)o.post[n]();return e}}([E,M]),L={left:48,bottom:36,top:24,right:24},j=function(){const t=document.createElement("div");return t.className="ka-chart--tooltip",t.style.display="none",t.innerHTML=`\n<div class="ka-chart--tooltip-box">\n  <div class="ka-chart--tooltip-heading"></div>\n  <div style="display: flex">\n    <div class="ka-chart--tooltip-content ka--visitors">\n      <div class="ka-chart--tooltip-amount"></div>\n      <div>${B.Visitors}</div>\n    </div>\n    <div class="ka-chart--tooltip-content ka--pageviews">\n      <div class="ka-chart--tooltip-amount"></div>\n      <div>${B.Pageviews}</div>\n    </div>\n  </div>\n</div>\n<div class="ka-chart--tooltip-arrow"></div>`,t}();function P(){j.style.display="none"}function H(t,e,o){o||(o=Math.max(240,Math.min(window.innerHeight/3,360))),t.parentElement.style.minHeight=`${o+4}px`;let r={month:"short",year:"numeric"};const i=t.clientWidth-L.left-L.right,a=o-L.bottom-L.top;function d(t){if(t.length<=1)return $("!");const e=i/t.length,n=.9*e,s=(e-n)/2,d=function(t){const e=function(t){if(t<10)return 10;const e=Math.floor(Math.log10(t)),n=Math.pow(10,e);return Math.ceil(t/n)*n}(t);return{ticks:[0,e/2,e],max:e}}(t.reduce(((t,e)=>t.pageviews>e.pageviews?t:e),0).pageviews),u=t.length<=90,f=a/d.max,h=t=>t*e,v=d.max<=0?()=>a:t=>a-t*f;return $("svg",{attrs:{width:"100%",height:o}},[$("g",[$("g",{attrs:{class:"axes-y",transform:`translate(0, ${L.top})`,"text-anchor":"end"}},d.ticks.map((t=>{const e=v(t);return $("g",[$("line",{attrs:{stroke:"#eee",x1:L.left,x2:i+L.left,y1:e,y2:e}}),$("text",{attrs:{y:e,fill:"#757575",x:.75*L.left,dy:"0.33em"}},l(t))])}))),$("g",{attrs:{class:"axes-x","text-anchor":"middle",transform:`translate(${L.left}, ${L.top+a})`}},t.map(((n,o)=>{let i=0===o||o===t.length-1?n.date:null;if(!u&&!i)return null;const l=h(o)+.5*e;return $("g",[$("line",{attrs:{stroke:"#ddd",x1:l,x2:l,y1:0,y2:6}}),i?$("text",{attrs:{fill:"#757575",x:l,y:10,dy:"1em"}},c(n.date,r)):""])})).filter((t=>null!==t)))]),$("g",{attrs:{class:"bars",transform:`translate(${L.left}, ${L.top})`}},t.map(((t,e)=>{const o=t.pageviews*f,i=t.visitors*f,l=h(e),a=function(t,e){return n=>{j.querySelector(".ka-chart--tooltip-heading").textContent=c(t.date,r),j.querySelector(".ka--visitors").children[0].textContent=t.visitors,j.querySelector(".ka--pageviews").children[0].textContent=t.pageviews;const o=n.currentTarget.getBoundingClientRect();j.style.display="block",j.style.left=o.left+window.scrollX-.5*j.clientWidth+.5*e+"px",j.style.top=o.y+window.scrollY-j.clientHeight+"px"}}(t,n);return $("g",{on:{click:a,mouseenter:a,mouseleave:P}},[$("rect",{attrs:{class:"ka--pageviews",height:o,width:n,x:l+s,y:v(t.pageviews)}}),$("rect",{attrs:{class:"ka--visitors",height:i,width:n,x:l+s,y:v(t.visitors)}})])})))])}return t=F(t,d(e)),document.body.appendChild(j),document.addEventListener("click",(t=>{t.target.matches(".ka-chart *,.ka-chart--tooltip *")||(j.style.display="none")})),{update:function(e,o){const i=o-e>=314496e5;r=i?{month:"short",year:"numeric"}:void 0,n("/stats",{start_date:s(e),end_date:s(o),monthly:i?1:0}).then((e=>{t=F(t,d(e))}))}}}const q=document.getElementById("koko-analytics-dashboard-widget-mount"),O=new Date,W=new Date(O.getFullYear(),O.getMonth(),O.getDate()-14,0,0,0),Y=new Date(O.getFullYear(),O.getMonth(),O.getDate(),23,59,59);function _(){q.clientWidth&&H(q,[],200).update(W,Y)}window.jQuery(document).on("postbox-toggled",_),_()}();